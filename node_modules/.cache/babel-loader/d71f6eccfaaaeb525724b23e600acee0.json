{"ast":null,"code":"var _jsxFileName = \"/home/astaroth/Escritorio/clonewp/src/pages/Chat/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"./styles/main.css\";\nimport EmojiTray from \"./components/EmojiTray\";\nimport ChatInput from \"./components/ChatInput\";\nimport Header from \"./components/Header\";\nimport ChatSidebar from \"./components/ChatSidebar\";\nimport Icon from \"components/Icon\";\nimport Profile from \"./components/Profile\";\nimport Convo from \"./components/Convo\";\nimport { useUsersContext } from \"context/usersContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Chat = ({\n  match,\n  history\n}) => {\n  _s();\n\n  const {\n    users,\n    setUserAsUnread,\n    addNewMessage\n  } = useUsersContext();\n  const userId = match.params.id;\n  let user = users.filter(user => user.id === Number(userId))[0];\n  const lastMsgRef = useRef(null);\n  const [showAttach, setShowAttach] = useState(false);\n  const [showEmojis, setShowEmojis] = useState(false);\n  const [showProfileSidebar, setShowProfileSidebar] = useState(false);\n  const [showSearchSidebar, setShowSearchSidebar] = useState(false);\n  const [newMessage, setNewMessage] = useState(\"\");\n  useEffect(() => {\n    if (!user) history.push(\"/\");else {\n      scrollToLastMsg();\n      setUserAsUnread(user.id);\n    }\n  }, []);\n  useEffect(() => {\n    user && scrollToLastMsg();\n  }, [users]);\n\n  const openSidebar = cb => {\n    // close any open sidebar first\n    setShowProfileSidebar(false);\n    setShowSearchSidebar(false); // call callback fn\n\n    cb(true);\n  };\n\n  const scrollToLastMsg = () => {\n    lastMsgRef.current.scrollIntoView();\n  };\n\n  const submitNewMessage = () => {\n    addNewMessage(user.id, newMessage);\n    setNewMessage(\"\");\n    scrollToLastMsg();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat__body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__bg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        user: user,\n        openProfileSidebar: () => openSidebar(setShowProfileSidebar),\n        openSearchSidebar: () => openSidebar(setShowSearchSidebar)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__content\",\n        children: /*#__PURE__*/_jsxDEV(Convo, {\n          lastMsgRef: lastMsgRef,\n          messages: user.messages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"chat__footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chat__scroll-btn\",\n          \"aria-label\": \"scroll down\",\n          onClick: scrollToLastMsg,\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            id: \"downArrow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(EmojiTray, {\n          showEmojis: showEmojis,\n          newMessage: newMessage,\n          setNewMessage: setNewMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ChatInput, {\n          showEmojis: showEmojis,\n          setShowEmojis: setShowEmojis,\n          showAttach: showAttach,\n          setShowAttach: setShowAttach,\n          newMessage: newMessage,\n          setNewMessage: setNewMessage,\n          submitNewMessage: submitNewMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatSidebar, {\n      heading: \"Search Messages\",\n      active: showSearchSidebar,\n      closeSidebar: () => setShowSearchSidebar(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatSidebar, {\n      heading: \"Contact Info\",\n      active: showProfileSidebar,\n      closeSidebar: () => setShowProfileSidebar(false),\n      children: /*#__PURE__*/_jsxDEV(Profile, {\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Chat, \"I7+1SbVZKY5Y4qswyWBzjEK6G8E=\", false, function () {\n  return [useUsersContext];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/home/astaroth/Escritorio/clonewp/src/pages/Chat/index.jsx"],"names":["React","useEffect","useRef","useState","EmojiTray","ChatInput","Header","ChatSidebar","Icon","Profile","Convo","useUsersContext","Chat","match","history","users","setUserAsUnread","addNewMessage","userId","params","id","user","filter","Number","lastMsgRef","showAttach","setShowAttach","showEmojis","setShowEmojis","showProfileSidebar","setShowProfileSidebar","showSearchSidebar","setShowSearchSidebar","newMessage","setNewMessage","push","scrollToLastMsg","openSidebar","cb","current","scrollIntoView","submitNewMessage","messages"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport \"./styles/main.css\";\nimport EmojiTray from \"./components/EmojiTray\";\nimport ChatInput from \"./components/ChatInput\";\nimport Header from \"./components/Header\";\nimport ChatSidebar from \"./components/ChatSidebar\";\nimport Icon from \"components/Icon\";\n\nimport Profile from \"./components/Profile\";\nimport Convo from \"./components/Convo\";\nimport { useUsersContext } from \"context/usersContext\";\n\nconst Chat = ({ match, history }) => {\n\tconst { users, setUserAsUnread, addNewMessage } = useUsersContext();\n\n\tconst userId = match.params.id;\n\tlet user = users.filter((user) => user.id === Number(userId))[0];\n\n\tconst lastMsgRef = useRef(null);\n\tconst [showAttach, setShowAttach] = useState(false);\n\tconst [showEmojis, setShowEmojis] = useState(false);\n\tconst [showProfileSidebar, setShowProfileSidebar] = useState(false);\n\tconst [showSearchSidebar, setShowSearchSidebar] = useState(false);\n\tconst [newMessage, setNewMessage] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tif (!user) history.push(\"/\");\n\t\telse {\n\t\t\tscrollToLastMsg();\n\t\t\tsetUserAsUnread(user.id);\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tuser && scrollToLastMsg();\n\t}, [users]);\n\n\tconst openSidebar = (cb) => {\n\t\t// close any open sidebar first\n\t\tsetShowProfileSidebar(false);\n\t\tsetShowSearchSidebar(false);\n\n\t\t// call callback fn\n\t\tcb(true);\n\t};\n\n\tconst scrollToLastMsg = () => {\n\t\tlastMsgRef.current.scrollIntoView();\n\t};\n\n\tconst submitNewMessage = () => {\n\t\taddNewMessage(user.id, newMessage);\n\t\tsetNewMessage(\"\");\n\t\tscrollToLastMsg();\n\t};\n\n\treturn (\n\t\t<div className=\"chat\">\n\t\t\t<div className=\"chat__body\">\n\t\t\t\t<div className=\"chat__bg\"></div>\n\n\t\t\t\t<Header\n\t\t\t\t\tuser={user}\n\t\t\t\t\topenProfileSidebar={() => openSidebar(setShowProfileSidebar)}\n\t\t\t\t\topenSearchSidebar={() => openSidebar(setShowSearchSidebar)}\n\t\t\t\t/>\n\t\t\t\t<div className=\"chat__content\">\n\t\t\t\t\t<Convo lastMsgRef={lastMsgRef} messages={user.messages} />\n\t\t\t\t</div>\n\t\t\t\t<footer className=\"chat__footer\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"chat__scroll-btn\"\n\t\t\t\t\t\taria-label=\"scroll down\"\n\t\t\t\t\t\tonClick={scrollToLastMsg}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon id=\"downArrow\" />\n\t\t\t\t\t</button>\n\t\t\t\t\t<EmojiTray\n\t\t\t\t\t\tshowEmojis={showEmojis}\n\t\t\t\t\t\tnewMessage={newMessage}\n\t\t\t\t\t\tsetNewMessage={setNewMessage}\n\t\t\t\t\t/>\n\t\t\t\t\t<ChatInput\n\t\t\t\t\t\tshowEmojis={showEmojis}\n\t\t\t\t\t\tsetShowEmojis={setShowEmojis}\n\t\t\t\t\t\tshowAttach={showAttach}\n\t\t\t\t\t\tsetShowAttach={setShowAttach}\n\t\t\t\t\t\tnewMessage={newMessage}\n\t\t\t\t\t\tsetNewMessage={setNewMessage}\n\t\t\t\t\t\tsubmitNewMessage={submitNewMessage}\n\t\t\t\t\t/>\n\t\t\t\t</footer>\n\t\t\t</div>\n\t\t\t<ChatSidebar\n\t\t\t\theading=\"Search Messages\"\n\t\t\t\tactive={showSearchSidebar}\n\t\t\t\tcloseSidebar={() => setShowSearchSidebar(false)}\n\t\t\t>\n\n\t\t\t</ChatSidebar>\n\n\t\t\t<ChatSidebar\n\t\t\t\theading=\"Contact Info\"\n\t\t\t\tactive={showProfileSidebar}\n\t\t\t\tcloseSidebar={() => setShowProfileSidebar(false)}\n\t\t\t>\n\t\t\t\t<Profile user={user} />\n\t\t\t</ChatSidebar>\n\t\t</div>\n\t);\n};\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}